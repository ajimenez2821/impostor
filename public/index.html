<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quién es el Impostor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="styles.css" rel="stylesheet">
    <style>
        /* Animaciones suaves */
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-900 text-slate-50 font-sans min-h-screen flex flex-col items-center justify-center p-4">

    <div id="screen-login" class="w-full max-w-md space-y-6 fade-in text-center">
        <h1 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600">IMPOSTOR</h1>
        
        <input type="text" id="username" placeholder="Tu Nombre" class="w-full p-4 bg-slate-800 rounded-lg border border-slate-700 focus:outline-none focus:border-purple-500 transition text-center text-xl">
        
        <div class="grid grid-cols-2 gap-4">
            <button id="btn-create" class="bg-purple-600 hover:bg-purple-700 p-4 rounded-lg font-bold transition">Crear Sala</button>
            <div class="flex flex-col space-y-2">
                <input type="text" id="room-code-input" placeholder="CÓDIGO" class="p-4 bg-slate-800 rounded-lg border border-slate-700 text-center uppercase">
                <button id="btn-join" class="bg-slate-700 hover:bg-slate-600 p-2 rounded-lg font-bold transition">Unirse</button>
            </div>
        </div>
    </div>

    <div id="screen-lobby" class="hidden w-full max-w-md space-y-6 fade-in">
        <div class="text-center">
            <h2 class="text-xl text-slate-400">CÓDIGO DE SALA</h2>
            <h1 id="lobby-code" class="text-5xl font-mono font-bold text-purple-400 tracking-widest my-2">----</h1>
        </div>

        <div class="bg-slate-800 p-4 rounded-lg">
            <h3 class="font-bold mb-2 border-b border-slate-700 pb-2">Jugadores</h3>
            <ul id="player-list" class="space-y-2 text-slate-300">
                </ul>
        </div>

        <div id="host-controls" class="hidden space-y-4">
            <div class="flex items-center justify-between bg-slate-800 p-3 rounded">
                <span>Impostores</span>
                <select id="impostor-count" class="bg-slate-900 p-1 rounded">
                    <option value="1">1</option>
                    <option value="2">2</option>
                </select>
            </div>
            <button id="btn-start" class="w-full bg-green-600 hover:bg-green-700 p-4 rounded-lg font-bold text-xl shadow-lg shadow-green-900/50 transition">INICIAR PARTIDA</button>
        </div>
        <p id="waiting-msg" class="text-center text-slate-500 animate-pulse">Esperando al anfitrión...</p>
    </div>

    <div id="screen-game" class="hidden w-full max-w-md space-y-6 fade-in">
        
        <div class="bg-gradient-to-br from-slate-800 to-slate-900 p-6 rounded-2xl border border-slate-700 text-center shadow-2xl relative overflow-hidden">
            <div id="role-indicator" class="text-sm uppercase tracking-widest mb-2 text-slate-400">Categoría: <span id="game-category" class="text-white font-bold">...</span></div>
            
            <h2 id="secret-word-display" class="text-4xl font-extrabold py-8 text-white break-words">???</h2>
            
            <p id="role-desc" class="text-slate-400 text-sm">Escóndete y descubre la palabra</p>
            <div id="hint-box" class="hidden mt-4 bg-yellow-900/30 text-yellow-200 p-2 rounded text-sm"></div>
        </div>

        <div id="impostor-area" class="hidden bg-red-900/20 p-4 rounded-lg border border-red-900/50">
            <label class="block text-red-400 text-sm mb-2">¡Adivina la palabra para ganar ya!</label>
            <div class="flex gap-2">
                <input type="text" id="guess-input" class="flex-1 bg-slate-900 border border-red-800 rounded p-2 focus:outline-none" placeholder="Palabra secreta...">
                <button id="btn-guess" class="bg-red-600 px-4 rounded font-bold hover:bg-red-700">Adivinar</button>
            </div>
        </div>

        <div class="space-y-2">
            <h3 class="text-center text-slate-400 uppercase text-sm">Votar al Impostor</h3>
            <div id="voting-list" class="grid grid-cols-2 gap-2">
                </div>
        </div>

        <button id="btn-force-end" class="hidden w-full bg-slate-700 text-xs py-2 rounded mt-8">Forzar Fin de Votación</button>
    </div>

    <div id="screen-results" class="hidden w-full max-w-md text-center space-y-6 fade-in">
        <h1 class="text-3xl font-bold mb-4">RESULTADOS</h1>
        
        <div class="bg-slate-800 p-6 rounded-xl">
            <p class="text-slate-400 text-sm">La palabra era</p>
            <p id="result-word" class="text-3xl font-bold text-green-400 my-2">MANZANA</p>
        </div>

        <div class="bg-slate-800 p-6 rounded-xl">
            <p class="text-slate-400 text-sm">El Impostor era</p>
            <p id="result-impostor" class="text-2xl font-bold text-red-400 my-2">Jugador 1</p>
            <div id="result-guess-info" class="text-sm mt-2 border-t border-slate-700 pt-2"></div>
        </div>

        <div class="bg-slate-800 p-6 rounded-xl">
            <p class="text-slate-400 text-sm">El más votado fue</p>
            <p id="result-voted" class="text-xl font-bold text-yellow-400 my-2">-</p>
        </div>

        <button id="btn-back-lobby" class="w-full bg-purple-600 hover:bg-purple-700 p-4 rounded-lg font-bold transition">Volver al Lobby</button>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
</body>
</html>